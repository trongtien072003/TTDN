@model proj_tt.Web.Models.Products.IndexViewHomeModel

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
    var product = Model.Product;
    var price = product.Price;
    var discount = product.Discount;
    var originalPrice = discount > 0 ? price / (1 - discount / 100m) : price;
}

@section scripts {
    <script src="~/view-resources/Views/Products/DetailModal.js" asp-append-version="true"></script>
}

<div class="container py-4">
    <div class="row">
        <!-- Hình ảnh sản phẩm -->
        <div class="col-md-5">
            <img src="@product.ImageUrl" class="img-fluid border rounded" alt="@product.Name" />
        </div>

        <!-- Thông tin chi tiết -->
        <div class="col-md-7">
            <h2 class="mb-3">@product.Name</h2>

            <p><strong>Danh mục:</strong> @product.NameCategory</p>

            <!-- Giá và giảm giá -->
            <p>
                <strong>Giá:</strong>
                @if (discount > 0)
                {
                    <span style="text-decoration: line-through;">@originalPrice.ToString("N0")₫</span>
                    <span class="text-danger fw-bold ms-2">@price.ToString("N0")₫</span>
                    <span class="badge bg-success ms-2">-@discount%</span>
                }
                else
                {
                    <span class="text-danger fw-bold">@price.ToString("N0")₫</span>
                }
            </p>

            <p><strong>Tồn kho:</strong> @product.Stock sản phẩm</p>

            <p class="text-muted">@Html.Raw(product.Description)</p>

            <!-- Chọn số lượng -->
            <div class="my-3">
                <label for="quantity" class="form-label"><strong>Số lượng:</strong></label>
                <div class="input-group" style="max-width: 150px;">
                    <button class="btn btn-outline-secondary" type="button" id="decrease">-</button>
                    <input id="quantity" type="number" class="form-control text-center"
                           value="1" min="1" max="@product.Stock" />
                    <button class="btn btn-outline-secondary" type="button" id="increase">+</button>
                </div>
            </div>

            <!-- Tổng giá động -->
            <p class="mt-3">
                <strong>Tổng giá:</strong>
                <span class="total-price text-danger fw-bold"
                      data-price="@price.ToString("F2", System.Globalization.CultureInfo.InvariantCulture)">
                    @price.ToString("N0")₫
                </span>
            </p>

            <!-- Nút hành động -->
            <div class="mt-4 d-flex gap-2">
                <button class="btn btn-outline-warning add-to-cart-btn"
                        data-product-id="@product.Id">
                    <i class="fas fa-shopping-cart me-1"></i> Thêm vào giỏ hàng
                </button>
                <button class="btn btn-danger">
                    <i class="fas fa-bolt me-1"></i> Mua ngay
                </button>
            </div>
        </div>
    </div>
</div>
